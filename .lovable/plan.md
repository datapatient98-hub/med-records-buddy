
<goal>
تثبيت قائمة الأقسام المعتمدة (بدون القسم رقم 14) بحيث تظهر نفس الأقسام فقط داخل:
- قسم الدخول (Admission)
- قسم الخروج (Discharge)
- لوحة التحكم (Dashboard)
مع حذف أي أقسام أخرى موجودة حالياً من قاعدة البيانات، وتجهيز الاستيراد من Excel ليتعامل مع “العناية المتوسطة / العنايه المتوسطه” كقسم واحد.
</goal>

<context>
- حالياً جدول الأقسام يحتوي على أسماء قديمة/مختصرة مثل: (حريم، رجال، عناية عامة، متوسطة…).
- صفحات الدخول/الخروج/لوحة التحكم تعتمد على قراءة الأقسام من جدول departments مباشرة، لذلك تغيير جدول الأقسام سيغيّر ما يظهر في كل هذه الصفحات تلقائياً.
- يوجد “+ إضافة” و “تعديل القائمة” داخل بعض حقول الأقسام عبر SearchableSelect، وهذا قد يسمح بإضافة أقسام غير معتمدة لاحقاً؛ سنقفل ذلك للأقسام حتى تظل ثابتة.
</context>

<final-approved-departments>
سأضيف (13) قسم فقط (بعد حذف رقم 14 “كبد حريم”) بهذه الأسماء بالضبط:

1) العناية العامة  
2) الأطفال  
3) الغسيل الكلوي  
4) حميات حريم  
5) العناية المتوسطة  (وتُعتبر “العنايه المتوسطه” نفس القسم أثناء الاستيراد)  
6) العزل  
7) حميات رجال  
8) عناية الأمراض التنفسية  
9) الكبد  
10) عناية السموم  
11) الاستقبال  
12) بذل حريم بطن  
13) رجال بذل بطن  
</final-approved-departments>

<important-warning>
حذف كل الأقسام وإعادة إدخال 13 قسم سيؤثر على أي سجلات قديمة كانت مرتبطة بأقسام قديمة (بالـ id). 
حالياً عندنا سجلات دخول تم ربطها بقسم “حريم” (وهذا الاسم لن يكون موجود بعد التثبيت)، وهذا قد يجعل “اسم القسم” يظهر فارغ/غير محدد في السجلات القديمة لو لم نُعد توزيعها.
بما أنك طلبت “احذف كل الأقسام وسجل الأقسام المعتمدة”، سننفّذ ذلك كما هو، وبعدها لو أردت إعادة توزيع السجلات القديمة بدقة سنحتاج ملف Excel أو على الأقل عمود القسم مرتبطاً بأرقام المرضى/الصفوف.
</important-warning>

<implementation-steps>
1) إضافة “أداة تثبيت الأقسام المعتمدة” داخل لوحة التحكم
   - زر واضح مثلاً: “تثبيت الأقسام المعتمدة”
   - عند الضغط:
     a) حذف كل الصفوف من جدول departments
     b) إدخال الـ 13 قسم بالقائمة أعلاه (insert bulk)
     c) عمل refresh/invalidate لكاش react-query لـ ["departments"] لكي تظهر فوراً في الدخول/الخروج/لوحة التحكم
   - إضافة تأكيد (AlertDialog) قبل التنفيذ لأنه إجراء جذري.

2) قفل إدارة الأقسام من الواجهة (Prevent drift)
   - في صفحات Admission و Discharge وأي مكان فيه اختيار قسم:
     - إزالة/تعطيل onAddNew و onManage الخاصين بالأقسام فقط
     - (نترك الإضافة/التعديل لباقي القوائم مثل الأطباء/التشخيصات حسب احتياجك)
   - الهدف: لا أحد يضيف “أقسام جديدة” بالخطأ بعد ما نثبت القائمة.

3) تحسين الاستيراد من Excel لتوحيد “العناية المتوسطة / العنايه المتوسطه”
   - داخل importAdmissionsFromExcel.ts:
     - قبل البحث في depMap، نطبّق “تطبيع إضافي للأقسام”:
       - تحويل “العنايه المتوسطه” → “العناية المتوسطة”
       - وأيضاً trimming للمسافات الزائدة مثل “الكبد ” → “الكبد”
     - (اختياري ومفيد) إضافة Alias بسيط لبعض الاختلافات الشائعة:
       - “الاطفال” → “الأطفال” (حتى لو كان التطبيع الحالي يغطيها، نضمن 100%)
       - “عناية عامة” → “العناية العامة” (للتوافق مع أي ملفات قديمة)
   - النتيجة: أي ملف Excel يكتب “العنايه المتوسطه” سيتم إدخاله في نفس قسم “العناية المتوسطة” بدون إنشاء قسم جديد.

4) التحقق بعد التنفيذ
   - بعد الضغط على زر التثبيت:
     - التأكد أن queries في:
       - Admission page
       - Discharge page
       - Dashboard
       تعرض نفس 13 قسم فقط وبالترتيب (حسب order("name") الحالي).
   - عمل اختبار سريع لاستيراد صفين من Excel:
     - صف بـ “العناية المتوسطة”
     - صف بـ “العنايه المتوسطه”
     - والتأكد أنهم يذهبون لنفس department_id.

</implementation-steps>

<edge-cases>
- لو الاستيراد حصل قبل تثبيت الأقسام: قد يرجع defaultDepartmentId لأي قسم قديم. لذلك الأفضل تثبيت الأقسام أولاً ثم الاستيراد.
- لو عندكم بيانات قديمة كثيرة وتريدون الحفاظ على “أسماء الأقسام” داخلها:
  - سنحتاج لاحقاً ملف Excel الأصلي (أو تقرير يربط unified_number بالقسم) لإعادة توزيع دقيقة عبر تحديث department_id لكل سجل.
</edge-cases>

<what-i-need-from-you>
لا شيء إضافي للتنفيذ الآن لأنك طلبت أن أرسل لك الأقسام “اللي هتتضاف” وقد أرسلتها أعلاه، وسنثبتها كقائمة نهائية من 13 قسم.
</what-i-need-from-you>
